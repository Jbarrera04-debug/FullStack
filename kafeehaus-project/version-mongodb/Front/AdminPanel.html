<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel de Administraci√≥n - Kafeehaus</title>
    <script src="/static/config.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Librer√≠as para exportaci√≥n -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root {
            --cafe-oscuro: #4A2C2A;
            --cafe-medio: #8B5A3C;
            --cafe-claro: #D4B896;
            --beige: #F5E6D3;
            --oro: #C9A96E;
            --verde: #27AE60;
            --rojo: #E74C3C;
            --azul: #3498DB;
            --purpura: #9B59B6;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, var(--beige) 100%);
            padding-top: 80px;
            color: #2C3E50;
            min-height: 100vh;
        }

        /* Navbar Mejorada */
        .navbar {
            background: linear-gradient(135deg, var(--cafe-oscuro) 0%, #5a382c 100%) !important;
            box-shadow: 0 4px 20px rgba(74, 44, 42, 0.3);
            padding: 1rem 0;
        }

        .navbar-brand {
            font-weight: 700;
            font-size: 1.8rem;
            color: white !important;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .navbar-brand i {
            color: var(--oro);
            font-size: 1.5rem;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.9) !important;
            font-weight: 500;
            padding: 0.5rem 1rem !important;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-link:hover {
            color: white !important;
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }

        .user-info {
            color: white;
            margin-right: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .user-info i {
            color: var(--oro);
        }

        .btn-outline-light {
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-weight: 500;
            padding: 0.5rem 1.5rem;
            border-radius: 10px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-outline-light:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: white;
            transform: translateY(-1px);
        }

        /* Estad√≠sticas */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 
                0 10px 30px rgba(0,0,0,0.08),
                0 0 0 1px rgba(255, 255, 255, 0.8);
            text-align: center;
            border-left: 4px solid var(--oro);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.12);
        }

        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            opacity: 0.8;
        }

        .stat-card:nth-child(1) .stat-icon { color: var(--verde); }
        .stat-card:nth-child(2) .stat-icon { color: var(--azul); }
        .stat-card:nth-child(3) .stat-icon { color: var(--oro); }
        .stat-card:nth-child(4) .stat-icon { color: var(--rojo); }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--cafe-oscuro);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--cafe-medio);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
        }

        /* Cards de Gesti√≥n */
        .management-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 
                0 10px 30px rgba(0,0,0,0.08),
                0 0 0 1px rgba(255, 255, 255, 0.8);
            margin-bottom: 2rem;
            overflow: hidden;
            border: none;
        }

        .card-header {
            background: linear-gradient(135deg, var(--cafe-oscuro), var(--cafe-medio));
            color: white;
            border-radius: 20px 20px 0 0 !important;
            font-weight: 600;
            padding: 1.5rem 2rem;
            border: none;
            display: flex;
            align-items: center;
            justify-content: between;
        }

        .card-header h5 {
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .card-header i {
            color: var(--oro);
        }

        .card-body {
            padding: 2rem;
        }

        /* Botones de Acci√≥n */
        .btn-success {
            background: linear-gradient(135deg, var(--verde), #2ecc71);
            border: none;
            color: white;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--oro), #d4b896);
            border: none;
            color: var(--cafe-oscuro);
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(201, 169, 110, 0.3);
            transition: all 0.3s ease;
        }

        .btn-warning:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(201, 169, 110, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--rojo), #e74c3c);
            border: none;
            color: white;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(231, 76, 60, 0.3);
            transition: all 0.3s ease;
        }

        .btn-danger:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(231, 76, 60, 0.4);
        }

        .btn-info {
            background: linear-gradient(135deg, var(--azul), #3498db);
            border: none;
            color: white;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
            transition: all 0.3s ease;
        }

        .btn-info:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4);
        }

        .btn-purple {
            background: linear-gradient(135deg, var(--purpura), #9B59B6);
            border: none;
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(155, 89, 182, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-purple:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(155, 89, 182, 0.4);
        }

        .btn-export {
            background: linear-gradient(135deg, var(--cafe-medio), var(--cafe-oscuro));
            border: none;
            color: white;
            font-weight: 600;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(139, 90, 60, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .btn-export:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(139, 90, 60, 0.4);
        }

        /* Tablas Mejoradas */
        .table {
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .table thead th {
            background: linear-gradient(135deg, var(--cafe-oscuro), var(--cafe-medio));
            color: white;
            border: none;
            padding: 1.2rem 1rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
        }

        .table tbody td {
            padding: 1.2rem 1rem;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            vertical-align: middle;
            font-weight: 500;
        }

        .table tbody tr:last-child td {
            border-bottom: none;
        }

        .table tbody tr:hover td {
            background: linear-gradient(135deg, #fff9f0, var(--beige));
            transform: translateX(5px);
            transition: all 0.3s ease;
        }

        /* Badges */
        .badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .bg-success {
            background: linear-gradient(135deg, var(--verde), #2ecc71) !important;
        }

        .bg-warning {
            background: linear-gradient(135deg, var(--oro), #d4b896) !important;
            color: var(--cafe-oscuro) !important;
        }

        .bg-danger {
            background: linear-gradient(135deg, var(--rojo), #e74c3c) !important;
        }

        /* Modal Mejorado */
        .modal-content {
            border-radius: 20px;
            border: none;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        .modal-header {
            background: linear-gradient(135deg, var(--cafe-oscuro), var(--cafe-medio));
            color: white;
            border: none;
            padding: 1.5rem 2rem;
        }

        .modal-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-close {
            filter: invert(1);
            opacity: 0.8;
        }

        /* Reporte Section */
        .reporte-section {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            border-left: 4px solid var(--purpura);
        }

        .reporte-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .reporte-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--cafe-oscuro);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .reporte-fecha {
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            font-weight: 600;
            color: var(--cafe-medio);
        }

        .export-buttons {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .reporte-resumen {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .resumen-item {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .resumen-valor {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--cafe-oscuro);
            margin-bottom: 0.5rem;
        }

        .resumen-label {
            color: var(--cafe-medio);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .reporte-vacio {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--cafe-medio);
        }

        .reporte-vacio i {
            font-size: 4rem;
            margin-bottom: 1rem;
            color: var(--cafe-claro);
        }

        /* Animaciones */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stat-card, .management-card, .reporte-section {
            animation: fadeIn 0.6s ease-out;
        }

        .stat-card:nth-child(1) { animation-delay: 0.1s; }
        .stat-card:nth-child(2) { animation-delay: 0.2s; }
        .stat-card:nth-child(3) { animation-delay: 0.3s; }
        .stat-card:nth-child(4) { animation-delay: 0.4s; }

        .management-card:nth-child(1) { animation-delay: 0.2s; }
        .management-card:nth-child(2) { animation-delay: 0.3s; }
        .management-card:nth-child(3) { animation-delay: 0.4s; }

        /* Estados Vac√≠os */
        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--cafe-medio);
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 1rem;
            color: var(--cafe-claro);
        }
    </style>
</head>
<body>
    <!-- Navbar Mejorada -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-mug-hot"></i>Kafeehaus Admin
            </a>
            <div class="navbar-nav ms-auto">
                <div class="user-info">
                    <i class="fas fa-user-shield"></i>
                    <span id="userName">Administrador</span>
                </div>
                <a class="nav-link" href="/menu">
                    <i class="fas fa-utensils"></i>Ir al Men√∫
                </a>
                <button class="btn btn-outline-light ms-2" onclick="cerrarSesion()">
                    <i class="fas fa-sign-out-alt"></i>Cerrar Sesi√≥n
                </button>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Estad√≠sticas -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="stat-number" id="totalVentas">$0</div>
                <div class="stat-label">Total Ventas</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-shopping-bag"></i>
                </div>
                <div class="stat-number" id="totalPedidos">0</div>
                <div class="stat-label">Total Pedidos</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-number" id="pedidosCompletados">0</div>
                <div class="stat-label">Pedidos Completados</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-number" id="pedidosPendientes">0</div>
                <div class="stat-label">Pedidos Pendientes</div>
            </div>
        </div>

        <!-- Bot√≥n Generar Reporte -->
        <div class="d-flex justify-content-end mb-4">
            <button class="btn btn-purple" onclick="mostrarModalReporte()">
                <i class="fas fa-chart-bar"></i>Generar Reporte de Ventas
            </button>
        </div>

        <!-- Secci√≥n de Reporte (se muestra din√°micamente) -->
        <div id="reporteContainer" style="display: none;">
            <!-- El reporte se cargar√° aqu√≠ din√°micamente -->
        </div>

        <!-- Gesti√≥n de Productos -->
        <div class="management-card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-box-open"></i>Gesti√≥n de Productos
                </h5>
                <button class="btn btn-success" onclick="mostrarModalProducto()">
                    <i class="fas fa-plus"></i>Agregar Producto
                </button>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Producto</th>
                                <th>Precio</th>
                                <th>Categor√≠a</th>
                                <th>Disponible</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaProductos">
                            <!-- Los productos se cargar√°n aqu√≠ -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Lista de Pedidos -->
        <div class="management-card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-receipt"></i>Pedidos Recientes
                </h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID Pedido</th>
                                <th>Cliente</th>
                                <th>Total</th>
                                <th>Estado</th>
                                <th>Fecha</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaPedidos">
                            <!-- Los pedidos se cargar√°n aqu√≠ -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Gesti√≥n de Empleados -->
        <div class="management-card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-users"></i>Equipo de Trabajo
                </h5>
                <button class="btn btn-success" onclick="mostrarModalEmpleado()">
                    <i class="fas fa-plus"></i>Agregar Empleado
                </button>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Email</th>
                                <th>Rol</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaEmpleados">
                            <!-- Los empleados se cargar√°n aqu√≠ -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para agregar/editar producto -->
    <div class="modal fade" id="productoModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalProductoTitulo">
                        <i class="fas fa-plus-circle"></i>Agregar Producto
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formProducto">
                        <input type="hidden" id="productoId">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Nombre del Producto</label>
                                <input type="text" class="form-control" id="productoNombre" required placeholder="Ej: Cappuccino Especial">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Precio</label>
                                <input type="number" class="form-control" id="productoPrecio" required placeholder="Ej: 2800" step="0.01" min="0">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Categor√≠a</label>
                                <select class="form-control" id="productoCategoria" required>
                                    <option value="">Seleccionar categor√≠a...</option>
                                    <option value="bebida">‚òï Bebida Caliente</option>
                                    <option value="bebida_fria">üßä Bebida Fr√≠a</option>
                                    <option value="comida">üç∞ Comida/Postre</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">URL de Imagen</label>
                                <input type="text" class="form-control" id="productoImagen" required placeholder="https://ejemplo.com/imagen.jpg">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Descripci√≥n</label>
                            <textarea class="form-control" id="productoDescripcion" rows="3" required placeholder="Describe el producto..."></textarea>
                        </div>
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" id="productoDisponible" checked style="transform: scale(1.2);">
                            <label class="form-check-label fw-bold">Producto Disponible</label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times"></i>Cancelar
                    </button>
                    <button type="button" class="btn btn-success" onclick="guardarProducto()">
                        <i class="fas fa-save"></i>Guardar Producto
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para agregar/editar empleado -->
    <div class="modal fade" id="empleadoModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalEmpleadoTitulo">
                        <i class="fas fa-user-plus"></i>Agregar Empleado
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formEmpleado">
                        <input type="hidden" id="empleadoId">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Nombre Completo</label>
                                <input type="text" class="form-control" id="empleadoNombre" required placeholder="Ej: Ana Torres L√≥pez">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control" id="empleadoEmail" required placeholder="ejemplo@kafeehaus.cl">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Rol</label>
                                <select class="form-control" id="empleadoRol" required>
                                    <option value="">Seleccionar rol...</option>
                                    <option value="Barista">‚òï Barista</option>
                                    <option value="Cajero">üí∞ Cajero</option>
                                    <option value="Gerente">üëë Gerente</option>
                                    <option value="Administrador">‚öôÔ∏è Administrador</option>
                                    <option value="Mesero">üçΩÔ∏è Mesero</option>
                                    <option value="Cocinero">üë®‚Äçüç≥ Cocinero</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Tel√©fono</label>
                                <input type="tel" class="form-control" id="empleadoTelefono" placeholder="+56 9 1234 5678">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Direcci√≥n</label>
                            <input type="text" class="form-control" id="empleadoDireccion" placeholder="Direcci√≥n completa">
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Fecha de Contrataci√≥n</label>
                                <input type="date" class="form-control" id="empleadoFechaContratacion">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Salario</label>
                                <input type="number" class="form-control" id="empleadoSalario" placeholder="Ej: 500000" step="0.01" min="0">
                            </div>
                        </div>
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" id="empleadoActivo" checked style="transform: scale(1.2);">
                            <label class="form-check-label fw-bold">Empleado Activo</label>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Notas Adicionales</label>
                            <textarea class="form-control" id="empleadoNotas" rows="3" placeholder="Informaci√≥n adicional sobre el empleado..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times"></i>Cancelar
                    </button>
                    <button type="button" class="btn btn-success" onclick="guardarEmpleado()">
                        <i class="fas fa-save"></i>Guardar Empleado
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para generar reporte -->
    <div class="modal fade" id="reporteModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-chart-bar"></i>Generar Reporte de Ventas
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formReporte">
                        <div class="mb-3">
                            <label class="form-label">Seleccionar Fecha</label>
                            <input type="date" class="form-control" id="fechaReporte" required>
                        </div>
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i>
                            <small>Selecciona una fecha para generar el reporte de ventas de ese d√≠a.</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times"></i>Cancelar
                    </button>
                    <button type="button" class="btn btn-purple" onclick="generarReporte()">
                        <i class="fas fa-chart-bar"></i>Generar Reporte
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Variables globales
        let reporteActual = null;
        let fechaReporteActual = null;

        // Verificaci√≥n de permisos MEJORADA
        function verificarPermisos() {
            const userData = localStorage.getItem('userData');
            
            if (!userData) {
                console.log('‚ùå No hay datos de usuario, redirigiendo al login...');
                window.location.href = '/iniciarsesion';
                return false;
            }

            try {
                const user = JSON.parse(userData);
                console.log('üë§ Usuario en admin:', user);
                
                if (user.rol !== 'admin') {
                    console.log('‚ùå Usuario no es admin, redirigiendo al men√∫...');
                    alert('Acceso no autorizado. Debes ser administrador.');
                    window.location.href = '/menu';
                    return false;
                }

                // Mostrar nombre de usuario
                document.getElementById('userName').textContent = user.nombre;
                return true;

            } catch (error) {
                console.error('‚ùå Error verificando permisos:', error);
                localStorage.removeItem('userData');
                window.location.href = '/iniciarsesion';
                return false;
            }
        }

        // Cerrar sesi√≥n
        function cerrarSesion() {
            if (confirm('¬øEst√°s seguro de que quieres cerrar sesi√≥n?')) {
                localStorage.removeItem('userData');
                localStorage.removeItem('cart');
                window.location.href = '/iniciarsesion';
            }
        }

        // Cargar estad√≠sticas
        async function cargarEstadisticas() {
            try {
                const response = await fetch('/api/admin/reportes/ventas');
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('totalVentas').textContent = '$' + (data.total_ventas || 0).toLocaleString();
                    document.getElementById('totalPedidos').textContent = data.total_pedidos || 0;
                    document.getElementById('pedidosCompletados').textContent = data.pedidos_completados || 0;
                    document.getElementById('pedidosPendientes').textContent = data.pedidos_pendientes || 0;
                }
            } catch (error) {
                console.error('Error cargando estad√≠sticas:', error);
            }
        }

        // Cargar productos
        async function cargarProductos() {
            try {
                const response = await fetch('/api/productos');
                if (response.ok) {
                    const productos = await response.json();
                    const tabla = document.getElementById('tablaProductos');
                    
                    if (productos.length === 0) {
                        tabla.innerHTML = `
                            <tr>
                                <td colspan="5" class="text-center">
                                    <div class="empty-state">
                                        <i class="fas fa-box-open"></i>
                                        <h5>No hay productos</h5>
                                        <p>Agrega el primer producto a tu men√∫</p>
                                    </div>
                                </td>
                            </tr>
                        `;
                        return;
                    }
                    
                    tabla.innerHTML = '';

                    productos.forEach(producto => {
                        const fila = `
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <img src="${producto.imagen_url}" alt="${producto.nombre}" 
                                             style="width: 50px; height: 50px; object-fit: cover; border-radius: 8px; margin-right: 1rem;">
                                        <div>
                                            <strong>${producto.nombre}</strong>
                                            <br>
                                            <small class="text-muted">${producto.descripcion.substring(0, 50)}...</small>
                                        </div>
                                    </div>
                                </td>
                                <td class="fw-bold text-success">$${producto.precio.toLocaleString()}</td>
                                <td>
                                    <span class="badge bg-light text-dark">
                                        ${producto.categoria === 'bebida' ? '‚òï Bebida' : 
                                          producto.categoria === 'bebida_fria' ? 'üßä Bebida Fr√≠a' : 
                                          'üç∞ Comida'}
                                    </span>
                                </td>
                                <td>
                                    ${producto.disponible ? 
                                        '<span class="badge bg-success"><i class="fas fa-check"></i> Disponible</span>' : 
                                        '<span class="badge bg-danger"><i class="fas fa-times"></i> No Disponible</span>'}
                                </td>
                                <td>
                                    <div class="btn-group">
                                        <button class="btn btn-warning btn-sm" onclick="editarProducto('${producto.id}')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="eliminarProducto('${producto.id}')">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        `;
                        tabla.innerHTML += fila;
                    });
                }
            } catch (error) {
                console.error('Error cargando productos:', error);
            }
        }

        // Cargar pedidos
        async function cargarPedidos() {
            try {
                const response = await fetch('/api/pedidos');
                if (response.ok) {
                    const pedidos = await response.json();
                    const tabla = document.getElementById('tablaPedidos');
                    
                    if (pedidos.length === 0) {
                        tabla.innerHTML = `
                            <tr>
                                <td colspan="6" class="text-center">
                                    <div class="empty-state">
                                        <i class="fas fa-receipt"></i>
                                        <h5>No hay pedidos</h5>
                                        <p>Los pedidos aparecer√°n aqu√≠</p>
                                    </div>
                                </td>
                            </tr>
                        `;
                        return;
                    }
                    
                    tabla.innerHTML = '';

                    pedidos.forEach(pedido => {
                        const fecha = new Date(pedido.fecha_creacion).toLocaleDateString('es-CL', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        });
                        
                        const fila = `
                            <tr>
                                <td>
                                    <code class="text-muted">${pedido.id ? pedido.id.substring(0, 8) + '...' : 'N/A'}</code>
                                </td>
                                <td>
                                    <div>
                                        <strong>${pedido.usuario_email}</strong>
                                        <br>
                                        <small class="text-muted">${pedido.items.length} producto${pedido.items.length > 1 ? 's' : ''}</small>
                                    </div>
                                </td>
                                <td class="fw-bold text-success">$${(pedido.total || 0).toLocaleString()}</td>
                                <td>
                                    <span class="badge ${pedido.estado === 'completado' ? 'bg-success' : 'bg-warning'}">
                                        ${pedido.estado === 'completado' ? 
                                            '<i class="fas fa-check"></i> Completado' : 
                                            '<i class="fas fa-clock"></i> Pendiente'}
                                    </span>
                                </td>
                                <td>
                                    <small class="text-muted">${fecha}</small>
                                </td>
                                <td>
                                    <button class="btn btn-info btn-sm" onclick="verDetallesPedido('${pedido.id}')">
                                        <i class="fas fa-eye"></i> Detalles
                                    </button>
                                </td>
                            </tr>
                        `;
                        tabla.innerHTML += fila;
                    });
                }
            } catch (error) {
                console.error('Error cargando pedidos:', error);
            }
        }

        // Cargar empleados
        async function cargarEmpleados() {
            try {
                const response = await fetch('/api/admin/empleados');
                if (response.ok) {
                    const empleados = await response.json();
                    const tabla = document.getElementById('tablaEmpleados');
                    
                    if (empleados.length === 0) {
                        tabla.innerHTML = `
                            <tr>
                                <td colspan="5" class="text-center">
                                    <div class="empty-state">
                                        <i class="fas fa-users"></i>
                                        <h5>No hay empleados</h5>
                                        <p>Agrega el primer miembro a tu equipo</p>
                                    </div>
                                </td>
                            </tr>
                        `;
                        return;
                    }
                    
                    tabla.innerHTML = '';

                    empleados.forEach(empleado => {
                        const fila = `
                            <tr>
                                <td>
                                    <strong>${empleado.nombre}</strong>
                                    ${empleado.telefono ? `<br><small class="text-muted">${empleado.telefono}</small>` : ''}
                                </td>
                                <td>
                                    <code>${empleado.email}</code>
                                </td>
                                <td>
                                    <span class="badge bg-light text-dark">
                                        ${empleado.rol === 'Barista' ? '‚òï Barista' : 
                                          empleado.rol === 'Cajero' ? 'üí∞ Cajero' : 
                                          empleado.rol === 'Gerente' ? 'üëë Gerente' :
                                          empleado.rol === 'Administrador' ? '‚öôÔ∏è Administrador' :
                                          empleado.rol === 'Mesero' ? 'üçΩÔ∏è Mesero' :
                                          empleado.rol === 'Cocinero' ? 'üë®‚Äçüç≥ Cocinero' : 
                                          empleado.rol}
                                    </span>
                                </td>
                                <td>
                                    ${empleado.activo ? 
                                        '<span class="badge bg-success"><i class="fas fa-check"></i> Activo</span>' : 
                                        '<span class="badge bg-danger"><i class="fas fa-times"></i> Inactivo</span>'}
                                </td>
                                <td>
                                    <div class="btn-group">
                                        <button class="btn btn-warning btn-sm" onclick="editarEmpleado('${empleado.id}')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="eliminarEmpleado('${empleado.id}')">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        `;
                        tabla.innerHTML += fila;
                    });
                }
            } catch (error) {
                console.error('Error cargando empleados:', error);
            }
        }

        // FUNCIONES PARA REPORTES - ACTUALIZADAS CON EXPORTACI√ìN
        function mostrarModalReporte() {
            // Establecer fecha actual por defecto
            const hoy = new Date().toISOString().split('T')[0];
            document.getElementById('fechaReporte').value = hoy;
            document.getElementById('formReporte').reset();
            new bootstrap.Modal(document.getElementById('reporteModal')).show();
        }

        async function generarReporte() {
            const fechaSeleccionada = document.getElementById('fechaReporte').value;
            
            if (!fechaSeleccionada) {
                alert('Por favor selecciona una fecha');
                return;
            }

            try {
                console.log('üìä Generando reporte para fecha:', fechaSeleccionada);
                
                const response = await fetch(`/api/admin/reportes/ventas-dia?fecha=${fechaSeleccionada}`);
                
                if (response.ok) {
                    const reporte = await response.json();
                    reporteActual = reporte;
                    fechaReporteActual = fechaSeleccionada;
                    mostrarReporteEnPantalla(reporte, fechaSeleccionada);
                    
                    // Cerrar modal
                    const modal = bootstrap.Modal.getInstance(document.getElementById('reporteModal'));
                    modal.hide();
                    
                } else if (response.status === 404) {
                    // No hay ventas para esa fecha
                    reporteActual = null;
                    fechaReporteActual = fechaSeleccionada;
                    mostrarReporteVacio(fechaSeleccionada);
                    
                    // Cerrar modal
                    const modal = bootstrap.Modal.getInstance(document.getElementById('reporteModal'));
                    modal.hide();
                    
                } else {
                    throw new Error('Error al generar el reporte');
                }
            } catch (error) {
                console.error('Error generando reporte:', error);
                alert('Error al generar el reporte: ' + error.message);
            }
        }

        function mostrarReporteEnPantalla(reporte, fecha) {
            const container = document.getElementById('reporteContainer');
            const fechaFormateada = new Date(fecha).toLocaleDateString('es-CL', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            let pedidosHTML = '';
            reporte.pedidos.forEach(pedido => {
                const fechaPedido = new Date(pedido.fecha_creacion).toLocaleDateString('es-CL', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                let itemsHTML = '';
                pedido.items.forEach(item => {
                    itemsHTML += `
                        <div class="d-flex justify-content-between border-bottom pb-1 mb-1">
                            <span>${item.cantidad}x ${item.nombre}</span>
                            <span class="fw-bold">$${(item.precio * item.cantidad).toLocaleString()}</span>
                        </div>
                    `;
                });

                pedidosHTML += `
                    <div class="card mb-3">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <div>
                                <strong>Pedido: ${pedido.id.substring(0, 8)}...</strong>
                                <br>
                                <small class="text-muted">${pedido.usuario_email}</small>
                            </div>
                            <div class="text-end">
                                <div class="fw-bold text-success">$${pedido.total.toLocaleString()}</div>
                                <small class="text-muted">${fechaPedido}</small>
                            </div>
                        </div>
                        <div class="card-body">
                            ${itemsHTML}
                            <div class="mt-2 pt-2 border-top">
                                <small class="text-muted">${pedido.notas || 'Sin notas adicionales'}</small>
                            </div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = `
                <div class="reporte-section">
                    <div class="reporte-header">
                        <h3 class="reporte-title">
                            <i class="fas fa-chart-bar"></i>Reporte de Ventas
                        </h3>
                        <div class="reporte-fecha">
                            <i class="fas fa-calendar me-2"></i>${fechaFormateada}
                        </div>
                    </div>
                    
                    <div class="export-buttons">
                        <button class="btn btn-export" onclick="exportarPDF()">
                            <i class="fas fa-file-pdf"></i>Exportar PDF
                        </button>
                        <button class="btn btn-export" onclick="exportarExcel()">
                            <i class="fas fa-file-excel"></i>Exportar Excel
                        </button>
                    </div>
                    
                    <div class="reporte-resumen">
                        <div class="resumen-item">
                            <div class="resumen-valor">${reporte.total_pedidos}</div>
                            <div class="resumen-label">Total Pedidos</div>
                        </div>
                        <div class="resumen-item">
                            <div class="resumen-valor">$${reporte.total_ventas.toLocaleString()}</div>
                            <div class="resumen-label">Ventas Totales</div>
                        </div>
                        <div class="resumen-item">
                            <div class="resumen-valor">${reporte.pedidos_completados}</div>
                            <div class="resumen-label">Pedidos Completados</div>
                        </div>
                        <div class="resumen-item">
                            <div class="resumen-valor">${reporte.pedidos_pendientes}</div>
                            <div class="resumen-label">Pedidos Pendientes</div>
                        </div>
                    </div>

                    <h5 class="mb-3"><i class="fas fa-receipt"></i> Detalle de Pedidos</h5>
                    ${pedidosHTML}
                </div>
            `;

            container.style.display = 'block';
            // Scroll suave hacia el reporte
            container.scrollIntoView({ behavior: 'smooth' });
        }

        function mostrarReporteVacio(fecha) {
            const container = document.getElementById('reporteContainer');
            const fechaFormateada = new Date(fecha).toLocaleDateString('es-CL', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            container.innerHTML = `
                <div class="reporte-section">
                    <div class="reporte-header">
                        <h3 class="reporte-title">
                            <i class="fas fa-chart-bar"></i>Reporte de Ventas
                        </h3>
                        <div class="reporte-fecha">
                            <i class="fas fa-calendar me-2"></i>${fechaFormateada}
                        </div>
                    </div>
                    
                    <div class="reporte-vacio">
                        <i class="fas fa-chart-line"></i>
                        <h4>No existen ventas registradas en el per√≠odo seleccionado</h4>
                        <p class="text-muted">No se encontraron pedidos para la fecha ${fechaFormateada}</p>
                    </div>
                </div>
            `;

            container.style.display = 'block';
            // Scroll suave hacia el reporte
            container.scrollIntoView({ behavior: 'smooth' });
        }

        // FUNCIONES DE EXPORTACI√ìN
        function exportarPDF() {
            if (!reporteActual) {
                alert('No hay reporte para exportar');
                return;
            }

            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Configuraci√≥n del documento
                const fechaFormateada = new Date(fechaReporteActual).toLocaleDateString('es-CL');
                const pageWidth = doc.internal.pageSize.getWidth();
                
                // Logo y t√≠tulo
                doc.setFontSize(20);
                doc.setTextColor(74, 44, 42); // Color caf√© oscuro
                doc.text('Kafeehaus - Reporte de Ventas', pageWidth / 2, 20, { align: 'center' });
                
                doc.setFontSize(12);
                doc.setTextColor(100, 100, 100);
                doc.text(`Fecha: ${fechaFormateada}`, pageWidth / 2, 30, { align: 'center' });
                
                // L√≠nea separadora
                doc.setDrawColor(201, 169, 110); // Color oro
                doc.setLineWidth(0.5);
                doc.line(20, 35, pageWidth - 20, 35);
                
                // Resumen estad√≠stico
                let yPosition = 50;
                doc.setFontSize(14);
                doc.setTextColor(74, 44, 42);
                doc.text('Resumen Estad√≠stico', 20, yPosition);
                
                yPosition += 10;
                doc.setFontSize(10);
                doc.setTextColor(80, 80, 80);
                
                const resumenData = [
                    ['Total Pedidos', reporteActual.total_pedidos],
                    ['Ventas Totales', `$${reporteActual.total_ventas.toLocaleString()}`],
                    ['Pedidos Completados', reporteActual.pedidos_completados],
                    ['Pedidos Pendientes', reporteActual.pedidos_pendientes]
                ];
                
                doc.autoTable({
                    startY: yPosition,
                    head: [['M√©trica', 'Valor']],
                    body: resumenData,
                    theme: 'grid',
                    headStyles: { 
                        fillColor: [74, 44, 42],
                        textColor: 255,
                        fontStyle: 'bold'
                    },
                    styles: { fontSize: 10 },
                    margin: { left: 20, right: 20 }
                });
                
                yPosition = doc.lastAutoTable.finalY + 15;
                
                // Detalle de pedidos
                if (reporteActual.pedidos && reporteActual.pedidos.length > 0) {
                    doc.setFontSize(14);
                    doc.setTextColor(74, 44, 42);
                    doc.text('Detalle de Pedidos', 20, yPosition);
                    
                    const pedidosData = reporteActual.pedidos.map(pedido => {
                        const fecha = new Date(pedido.fecha_creacion).toLocaleDateString('es-CL', {
                            hour: '2-digit',
                            minute: '2-digit'
                        });
                        return [
                            pedido.id.substring(0, 8) + '...',
                            pedido.usuario_email,
                            `$${pedido.total.toLocaleString()}`,
                            pedido.estado,
                            fecha
                        ];
                    });
                    
                    doc.autoTable({
                        startY: yPosition + 10,
                        head: [['ID', 'Cliente', 'Total', 'Estado', 'Fecha']],
                        body: pedidosData,
                        theme: 'grid',
                        headStyles: { 
                            fillColor: [139, 90, 60], // Caf√© medio
                            textColor: 255,
                            fontStyle: 'bold'
                        },
                        styles: { fontSize: 8 },
                        margin: { left: 20, right: 20 }
                    });
                }
                
                // Pie de p√°gina
                const totalPages = doc.internal.getNumberOfPages();
                for (let i = 1; i <= totalPages; i++) {
                    doc.setPage(i);
                    doc.setFontSize(8);
                    doc.setTextColor(150, 150, 150);
                    doc.text(
                        `P√°gina ${i} de ${totalPages} - Generado el ${new Date().toLocaleDateString('es-CL')}`,
                        pageWidth / 2,
                        doc.internal.pageSize.getHeight() - 10,
                        { align: 'center' }
                    );
                }
                
                // Guardar PDF
                doc.save(`reporte_ventas_${fechaReporteActual}.pdf`);
                mostrarToast('‚úÖ PDF exportado exitosamente');
                
            } catch (error) {
                console.error('Error exportando PDF:', error);
                alert('Error al exportar el PDF: ' + error.message);
            }
        }

        function exportarExcel() {
            if (!reporteActual) {
                alert('No hay reporte para exportar');
                return;
            }

            try {
                // Crear workbook
                const wb = XLSX.utils.book_new();
                const fechaFormateada = new Date(fechaReporteActual).toLocaleDateString('es-CL');
                
                // Hoja de resumen
                const resumenData = [
                    ['Kafeehaus - Reporte de Ventas'],
                    [`Fecha: ${fechaFormateada}`],
                    [''],
                    ['Resumen Estad√≠stico'],
                    ['M√©trica', 'Valor'],
                    ['Total Pedidos', reporteActual.total_pedidos],
                    ['Ventas Totales', reporteActual.total_ventas],
                    ['Pedidos Completados', reporteActual.pedidos_completados],
                    ['Pedidos Pendientes', reporteActual.pedidos_pendientes],
                    [''],
                    ['Detalle de Pedidos'],
                    ['ID', 'Cliente', 'Total', 'Estado', 'Fecha', 'Notas']
                ];
                
                // Agregar datos de pedidos
                if (reporteActual.pedidos && reporteActual.pedidos.length > 0) {
                    reporteActual.pedidos.forEach(pedido => {
                        const fecha = new Date(pedido.fecha_creacion).toLocaleDateString('es-CL', {
                            hour: '2-digit',
                            minute: '2-digit'
                        });
                        resumenData.push([
                            pedido.id,
                            pedido.usuario_email,
                            pedido.total,
                            pedido.estado,
                            fecha,
                            pedido.notas || ''
                        ]);
                    });
                }
                
                const ws = XLSX.utils.aoa_to_sheet(resumenData);
                
                // Estilos b√°sicos
                ws['!cols'] = [
                    { wch: 20 }, // ID
                    { wch: 25 }, // Cliente
                    { wch: 15 }, // Total
                    { wch: 15 }, // Estado
                    { wch: 20 }, // Fecha
                    { wch: 30 }  // Notas
                ];
                
                XLSX.utils.book_append_sheet(wb, ws, 'Reporte Ventas');
                
                // Hoja de items detallados
                if (reporteActual.pedidos && reporteActual.pedidos.length > 0) {
                    const itemsData = [
                        ['Detalle de Items por Pedido'],
                        [''],
                        ['ID Pedido', 'Producto', 'Cantidad', 'Precio Unitario', 'Subtotal']
                    ];
                    
                    reporteActual.pedidos.forEach(pedido => {
                        pedido.items.forEach(item => {
                            itemsData.push([
                                pedido.id.substring(0, 8) + '...',
                                item.nombre,
                                item.cantidad,
                                item.precio,
                                item.precio * item.cantidad
                            ]);
                        });
                    });
                    
                    const wsItems = XLSX.utils.aoa_to_sheet(itemsData);
                    wsItems['!cols'] = [
                        { wch: 15 },
                        { wch: 30 },
                        { wch: 10 },
                        { wch: 15 },
                        { wch: 15 }
                    ];
                    
                    XLSX.utils.book_append_sheet(wb, wsItems, 'Items Detallados');
                }
                
                // Guardar archivo
                XLSX.writeFile(wb, `reporte_ventas_${fechaReporteActual}.xlsx`);
                mostrarToast('‚úÖ Excel exportado exitosamente');
                
            } catch (error) {
                console.error('Error exportando Excel:', error);
                alert('Error al exportar el Excel: ' + error.message);
            }
        }

        // Resto de las funciones (productos, empleados, etc.) se mantienen igual...
        // [Aqu√≠ ir√≠an todas las otras funciones que ya ten√≠as...]

        // Funci√≥n para mostrar toasts de notificaci√≥n
        function mostrarToast(mensaje) {
            const toast = document.createElement('div');
            toast.className = 'position-fixed top-0 end-0 p-3';
            toast.style.zIndex = '9999';
            toast.innerHTML = `
                <div class="toast show" role="alert">
                    <div class="toast-header" style="background: var(--verde); color: white;">
                        <i class="fas fa-check-circle me-2"></i>
                        <strong class="me-auto">√âxito</strong>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
                    </div>
                    <div class="toast-body">
                        ${mensaje}
                    </div>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // Auto-eliminar despu√©s de 3 segundos
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Inicializando Admin Panel...');
            
            if (verificarPermisos()) {
                console.log('‚úÖ Permisos verificados, cargando datos...');
                cargarEstadisticas();
                cargarProductos();
                cargarPedidos();
                cargarEmpleados();
            }
        });
    </script>
</body>
</html>